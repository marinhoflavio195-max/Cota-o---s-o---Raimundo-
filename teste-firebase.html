<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Teste Firebase</title>
</head>
<body style="font-family:Arial; text-align:center; padding:40px;">

<h2>Teste de Conex√£o Firebase</h2>

<input type="text" id="nome" placeholder="Digite algo">
<button onclick="salvar()">Salvar no Firebase</button>

<h3>Dados Salvos:</h3>
<div id="lista"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { 
  getFirestore, 
  collection, 
  addDoc,
  onSnapshot
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCeJtoTDcNmA8aMLtRrHR-CoZUQkbe5TYk",
  authDomain: "cot-online-sao-raimundo-sup.firebaseapp.com",
  projectId: "cot-online-sao-raimundo-sup",
  storageBucket: "cot-online-sao-raimundo-sup.firebasestorage.app",
  messagingSenderId: "57432026650",
  appId: "1:57432026650:web:8a47dd3f22b40bd6e02ba3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.salvar = async function() {
  const nome = document.getElementById("nome").value;
  if(!nome) return alert("Digite algo");

  await addDoc(collection(db,"teste"),{
    nome: nome,
    data: new Date()
  });

  alert("Salvo com sucesso!");
}

onSnapshot(collection(db,"teste"), (snapshot)=>{
  const div = document.getElementById("lista");
  div.innerHTML = "";

  snapshot.forEach((doc)=>{
    div.innerHTML += "<p>"+doc.data().nome+"</p>";
  });
});
</script>

</body>
</html>
